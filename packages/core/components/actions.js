(function framework7ComponentLoader(o,n){void 0===n&&(n=!0);var t=document,e=window,a=o.$,i=(o.Template7,o.utils),s=(o.device,o.support,o.Class,o.Modal),r=(o.ConstructorMethods,o.ModalMethods),c=function(o){function n(n,s){var r=i.extend({on:{}},n.params.actions,s);o.call(this,n,r);var c,l,p,d,u=this;if(u.params=r,u.params.hostEl&&0===(c=a(u.params.hostEl)).length)return u;if(u.params.buttons&&(l=u.params.buttons,Array.isArray(l[0])||(l=[l])),u.groups=l,u.params.el?p=a(u.params.el).eq(0):u.params.content?p=a(u.params.content).filter((function(o,n){return 1===n.nodeType})).eq(0):u.params.buttons&&(u.params.convertToPopover&&(u.popoverHtml=u.renderPopover()),u.actionsHtml=u.render()),p&&p.length>0&&p[0].f7Modal)return p[0].f7Modal;if(p&&0===p.length&&!u.actionsHtml&&!u.popoverHtml)return u.destroy();u.params.backdrop&&u.params.backdropEl?d=a(u.params.backdropEl):u.params.backdrop&&0===(d=n.root.children(".actions-backdrop")).length&&(d=a('<div class="actions-backdrop"></div>'),n.root.append(d));var m,v=u.open,f=u.close;function b(o){var n,t,e=a(this);if(e.hasClass("list-button")||e.hasClass("item-link")?(n=e.parents("li").index(),t=e.parents(".list").index()):(n=e.index(),t=e.parents(".actions-group").index()),void 0!==l){var i=l[t][n];i.onClick&&i.onClick(u,o),u.params.onClick&&u.params.onClick(u,o),!1!==i.close&&u.close()}}function h(o){var t=o.target,i=a(t);!n.device.desktop&&n.device.cordova&&(e.Keyboard&&e.Keyboard.isVisible||e.cordova.plugins&&e.cordova.plugins.Keyboard&&e.cordova.plugins.Keyboard.isVisible)||0===i.closest(u.el).length&&(u.params.closeByBackdropClick&&u.params.backdrop&&u.backdropEl&&u.backdropEl===t?u.close():u.params.closeByOutsideClick&&u.close())}function k(o){27===o.keyCode&&u.params.closeOnEscape&&u.close()}return u.open=function(o){var t=!1,e=u.params,s=e.targetEl,r=e.targetX,l=e.targetY,p=e.targetWidth,d=e.targetHeight;if(u.params.convertToPopover&&(s||void 0!==r&&void 0!==l)){var f="small"!==a(s).parents(".view").data("size");(u.params.forceToPopover||f)&&(t=!0)}return t&&u.popoverHtml?((m=n.popover.create({hostEl:c&&c[0],content:u.popoverHtml,backdrop:u.params.backdrop,targetEl:s,targetX:r,targetY:l,targetWidth:p,targetHeight:d})).open(o),m.once("popoverOpened",(function(){m.$el.find(".list-button, .item-link").each((function(o,n){a(n).on("click",b)}))})),m.once("popoverClosed",(function(){m.$el.find(".list-button, .item-link").each((function(o,n){a(n).off("click",b)})),i.nextTick((function(){m.destroy(),m=void 0}))}))):(u.$el=u.actionsHtml?a(u.actionsHtml):u.$el,u.$el[0].f7Modal=u,u.groups&&(u.$el.find(".actions-button").each((function(o,n){a(n).on("click",b)})),u.once("actionsClosed",(function(){u.$el.find(".actions-button").each((function(o,n){a(n).off("click",b)}))}))),u.el=u.$el[0],v.call(u,o)),u},u.close=function(o){return m?m.close(o):f.call(u,o),u},i.extend(u,{app:n,$hostEl:c,hostEl:c&&c[0],$el:p,el:p?p[0]:void 0,$backdropEl:d,backdropEl:d&&d[0],type:"actions"}),u.params.closeOnEscape&&(u.on("open",(function(){a(t).on("keydown",k)})),u.on("close",(function(){a(t).off("keydown",k)}))),u.on("opened",(function(){(u.params.closeByBackdropClick||u.params.closeByOutsideClick)&&n.on("click",h)})),u.on("close",(function(){(u.params.closeByBackdropClick||u.params.closeByOutsideClick)&&n.off("click",h)})),p&&(p[0].f7Modal=u),u}return o&&(n.__proto__=o),n.prototype=Object.create(o&&o.prototype),n.prototype.constructor=n,n.prototype.render=function(){if(this.params.render)return this.params.render.call(this,this);var o=this.groups;return('\n      <div class="actions-modal'+(this.params.grid?" actions-grid":"")+'">\n        '+o.map((function(o){return'<div class="actions-group">\n            '+o.map((function(o){var n=["actions-"+(o.label?"label":"button")],t=o.color,e=o.bg,a=o.bold,i=o.disabled,s=o.label,r=o.text,c=o.icon;return t&&n.push("color-"+t),e&&n.push("bg-color-"+e),a&&n.push("actions-button-bold"),i&&n.push("disabled"),s?'<div class="'+n.join(" ")+'">'+r+"</div>":('\n                <div class="'+n.join(" ")+'">\n                  '+(c?'<div class="actions-button-media">'+c+"</div>":"")+'\n                  <div class="actions-button-text">'+r+"</div>\n                </div>").trim()})).join("")+"\n          </div>"})).join("")+"\n      </div>\n    ").trim()},n.prototype.renderPopover=function(){return this.params.renderPopover?this.params.renderPopover.call(this,this):('\n      <div class="popover popover-from-actions">\n        <div class="popover-inner">\n          '+this.groups.map((function(o){return'\n            <div class="list">\n              <ul>\n                '+o.map((function(o){var n=[],t=o.color,e=o.bg,a=o.bold,i=o.disabled,s=o.label,r=o.text,c=o.icon;return t&&n.push("color-"+t),e&&n.push("bg-color-"+e),a&&n.push("popover-from-actions-bold"),i&&n.push("disabled"),s?(n.push("popover-from-actions-label"),'<li class="'+n.join(" ")+'">'+r+"</li>"):c?(n.push("item-link item-content"),'\n                      <li>\n                        <a class="'+n.join(" ")+'">\n                          <div class="item-media">\n                            '+c+'\n                          </div>\n                          <div class="item-inner">\n                            <div class="item-title">\n                              '+r+"\n                            </div>\n                          </div>\n                        </a>\n                      </li>\n                    "):(n.push("list-button"),'\n                    <li>\n                      <a class="'+n.join(" ")+'">'+r+"</a>\n                    </li>\n                  ")})).join("")+"\n              </ul>\n            </div>\n          "})).join("")+"\n        </div>\n      </div>\n    ").trim()},n}(s),l={name:"actions",params:{actions:{convertToPopover:!0,forceToPopover:!1,backdrop:!0,backdropEl:void 0,closeByBackdropClick:!0,closeOnEscape:!1,render:null,renderPopover:null}},static:{Actions:c},create:function(){this.actions=r({app:this,constructor:c,defaultSelector:".actions-modal.modal-in"})},clicks:{".actions-open":function(o,n){void 0===n&&(n={});this.actions.open(n.actions,n.animate)},".actions-close":function(o,n){void 0===n&&(n={});this.actions.close(n.actions,n.animate)}}};if(n){if(o.prototype.modules&&o.prototype.modules[l.name])return;o.use(l),o.instance&&(o.instance.useModuleParams(l,o.instance.params),o.instance.useModule(l))}return l}(Framework7, typeof Framework7AutoInstallComponent === 'undefined' ? undefined : Framework7AutoInstallComponent))
