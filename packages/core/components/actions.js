(function framework7ComponentLoader(o,n){void 0===n&&(n=!0);document,window;var t=o.$,e=(o.Template7,o.utils),a=(o.device,o.support,o.Class,o.Modal),i=(o.ConstructorMethods,o.ModalMethods),s=function(o){function n(n,a){var i=e.extend({on:{}},n.params.actions,a);o.call(this,n,i);var s,r,c,l,p=this;if(p.params=i,p.params.hostEl&&0===(s=t(p.params.hostEl)).length)return p;if(p.params.buttons&&(r=p.params.buttons,Array.isArray(r[0])||(r=[r])),p.groups=r,p.params.el?c=t(p.params.el).eq(0):p.params.content?c=t(p.params.content).filter(function(o,n){return 1===n.nodeType}).eq(0):p.params.buttons&&(p.params.convertToPopover&&(p.popoverHtml=p.renderPopover()),p.actionsHtml=p.render()),c&&c.length>0&&c[0].f7Modal)return c[0].f7Modal;if(c&&0===c.length&&!p.actionsHtml&&!p.popoverHtml)return p.destroy();p.params.backdrop&&p.params.backdropEl?l=t(p.params.backdropEl):p.params.backdrop&&0===(l=n.root.children(".actions-backdrop")).length&&(l=t('<div class="actions-backdrop"></div>'),n.root.append(l));var d,u=p.open,m=p.close;function v(o){var n,e,a=t(this);if(a.hasClass("list-button")||a.hasClass("item-link")?(n=a.parents("li").index(),e=a.parents(".list").index()):(n=a.index(),e=a.parents(".actions-group").index()),void 0!==r){var i=r[e][n];i.onClick&&i.onClick(p,o),p.params.onClick&&p.params.onClick(p,o),!1!==i.close&&p.close()}}function f(o){var e=o.target,a=t(e);!n.device.desktop&&n.device.cordova&&(window.Keyboard&&window.Keyboard.isVisible||window.cordova.plugins&&window.cordova.plugins.Keyboard&&window.cordova.plugins.Keyboard.isVisible)||0===a.closest(p.el).length&&(p.params.closeByBackdropClick&&p.params.backdrop&&p.backdropEl&&p.backdropEl===e?p.close():p.params.closeByOutsideClick&&p.close())}function h(o){27===o.keyCode&&p.params.closeOnEscape&&p.close()}return p.open=function(o){var a=!1,i=p.params,r=i.targetEl,c=i.targetX,l=i.targetY,m=i.targetWidth,f=i.targetHeight;return p.params.convertToPopover&&(r||void 0!==c&&void 0!==l)&&(p.params.forceToPopover||n.device.ios&&n.device.ipad||n.width>=768||n.device.desktop&&"aurora"===n.theme)&&(a=!0),a&&p.popoverHtml?((d=n.popover.create({hostEl:s&&s[0],content:p.popoverHtml,backdrop:p.params.backdrop,targetEl:r,targetX:c,targetY:l,targetWidth:m,targetHeight:f})).open(o),d.once("popoverOpened",function(){d.$el.find(".list-button, .item-link").each(function(o,n){t(n).on("click",v)})}),d.once("popoverClosed",function(){d.$el.find(".list-button, .item-link").each(function(o,n){t(n).off("click",v)}),e.nextTick(function(){d.destroy(),d=void 0})})):(p.$el=p.actionsHtml?t(p.actionsHtml):p.$el,p.$el[0].f7Modal=p,p.groups&&(p.$el.find(".actions-button").each(function(o,n){t(n).on("click",v)}),p.once("actionsClosed",function(){p.$el.find(".actions-button").each(function(o,n){t(n).off("click",v)})})),p.el=p.$el[0],u.call(p,o)),p},p.close=function(o){return d?d.close(o):m.call(p,o),p},e.extend(p,{app:n,$hostEl:s,hostEl:s&&s[0],$el:c,el:c?c[0]:void 0,$backdropEl:l,backdropEl:l&&l[0],type:"actions"}),p.params.closeOnEscape&&(p.on("open",function(){t(document).on("keydown",h)}),p.on("close",function(){t(document).off("keydown",h)})),p.on("opened",function(){(p.params.closeByBackdropClick||p.params.closeByOutsideClick)&&n.on("click",f)}),p.on("close",function(){(p.params.closeByBackdropClick||p.params.closeByOutsideClick)&&n.off("click",f)}),c&&(c[0].f7Modal=p),p}return o&&(n.__proto__=o),n.prototype=Object.create(o&&o.prototype),n.prototype.constructor=n,n.prototype.render=function(){if(this.params.render)return this.params.render.call(this,this);var o=this.groups;return('\n      <div class="actions-modal'+(this.params.grid?" actions-grid":"")+'">\n        '+o.map(function(o){return'<div class="actions-group">\n            '+o.map(function(o){var n=["actions-"+(o.label?"label":"button")],t=o.color,e=o.bg,a=o.bold,i=o.disabled,s=o.label,r=o.text,c=o.icon;return t&&n.push("color-"+t),e&&n.push("bg-color-"+e),a&&n.push("actions-button-bold"),i&&n.push("disabled"),s?'<div class="'+n.join(" ")+'">'+r+"</div>":('\n                <div class="'+n.join(" ")+'">\n                  '+(c?'<div class="actions-button-media">'+c+"</div>":"")+'\n                  <div class="actions-button-text">'+r+"</div>\n                </div>").trim()}).join("")+"\n          </div>"}).join("")+"\n      </div>\n    ").trim()},n.prototype.renderPopover=function(){return this.params.renderPopover?this.params.renderPopover.call(this,this):('\n      <div class="popover popover-from-actions">\n        <div class="popover-inner">\n          '+this.groups.map(function(o){return'\n            <div class="list">\n              <ul>\n                '+o.map(function(o){var n=[],t=o.color,e=o.bg,a=o.bold,i=o.disabled,s=o.label,r=o.text,c=o.icon;return t&&n.push("color-"+t),e&&n.push("bg-color-"+e),a&&n.push("popover-from-actions-bold"),i&&n.push("disabled"),s?(n.push("popover-from-actions-label"),'<li class="'+n.join(" ")+'">'+r+"</li>"):c?(n.push("item-link item-content"),'\n                      <li>\n                        <a class="'+n.join(" ")+'">\n                          <div class="item-media">\n                            '+c+'\n                          </div>\n                          <div class="item-inner">\n                            <div class="item-title">\n                              '+r+"\n                            </div>\n                          </div>\n                        </a>\n                      </li>\n                    "):(n.push("list-button"),'\n                    <li>\n                      <a class="'+n.join(" ")+'">'+r+"</a>\n                    </li>\n                  ")}).join("")+"\n              </ul>\n            </div>\n          "}).join("")+"\n        </div>\n      </div>\n    ").trim()},n}(a),r={name:"actions",params:{actions:{convertToPopover:!0,forceToPopover:!1,backdrop:!0,backdropEl:void 0,closeByBackdropClick:!0,closeOnEscape:!1,render:null,renderPopover:null}},static:{Actions:s},create:function(){this.actions=i({app:this,constructor:s,defaultSelector:".actions-modal.modal-in"})},clicks:{".actions-open":function(o,n){void 0===n&&(n={});this.actions.open(n.actions,n.animate)},".actions-close":function(o,n){void 0===n&&(n={});this.actions.close(n.actions,n.animate)}}};if(n){if(o.prototype.modules&&o.prototype.modules[r.name])return;o.use(r),o.instance&&(o.instance.useModuleParams(r,o.instance.params),o.instance.useModule(r))}return r}(Framework7, typeof Framework7AutoInstallComponent === 'undefined' ? undefined : Framework7AutoInstallComponent))
