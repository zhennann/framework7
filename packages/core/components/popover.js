(function framework7ComponentLoader(o,e){void 0===e&&(e=!0);document,window;var t=o.$,a=(o.Template7,o.utils),r=(o.device,o.support,o.Class,o.Modal),p=(o.ConstructorMethods,o.ModalMethods),n=function(o){function e(e,r){var p=a.extend({on:{}},e.params.popover,r);o.call(this,e,p);var n,i,s=this;if(s.params=p,s.params.hostEl&&0===(n=t(s.params.hostEl)).length)return s;if((i=s.params.el?t(s.params.el).eq(0):t(s.params.content).filter(function(o,e){return 1===e.nodeType}).eq(0))&&i.length>0&&i[0].f7Modal)return i[0].f7Modal;var l,d,c=t(s.params.targetEl).eq(0);if(0===i.length)return s.destroy();s.params.backdrop&&s.params.backdropEl?l=t(s.params.backdropEl):s.params.backdrop&&0===(l=e.root.children(".popover-backdrop")).length&&(l=t('<div class="popover-backdrop"></div>'),e.root.append(l)),0===i.find(".popover-angle").length?(d=t('<div class="popover-angle"></div>'),i.prepend(d)):d=i.find(".popover-angle");var h=s.open;function m(){s.resize()}function v(o){var a=o.target,r=t(a);!e.device.desktop&&e.device.cordova&&(window.Keyboard&&window.Keyboard.isVisible||window.cordova.plugins&&window.cordova.plugins.Keyboard&&window.cordova.plugins.Keyboard.isVisible)||0===r.closest(s.el).length&&(s.params.closeByBackdropClick&&s.params.backdrop&&s.backdropEl&&s.backdropEl===a?s.close():s.params.closeByOutsideClick&&s.close())}function f(o){27===o.keyCode&&s.params.closeOnEscape&&s.close()}return a.extend(s,{app:e,$hostEl:n,hostEl:n&&n[0],$el:i,el:i[0],$targetEl:c,targetEl:c[0],$angleEl:d,angleEl:d[0],$backdropEl:l,backdropEl:l&&l[0],type:"popover",open:function(){for(var o,e=[],a=arguments.length;a--;)e[a]=arguments[a];var r=e[0],p=e[1];return"boolean"==typeof e[0]&&(p=(o=e)[0],r=o[1]),r&&(s.$targetEl=t(r),s.targetEl=s.$targetEl[0]),h.call(s,p)}}),s.on("popoverOpen",function(){s.resize(),e.on("resize",m),t(window).on("keyboardDidShow keyboardDidHide",m),s.on("popoverClose popoverBeforeDestroy",function(){e.off("resize",m),t(window).off("keyboardDidShow keyboardDidHide",m)})}),s.params.closeOnEscape&&(s.on("popoverOpen",function(){t(document).on("keydown",f)}),s.on("popoverClose",function(){t(document).off("keydown",f)})),s.on("popoverOpened",function(){(s.params.closeByOutsideClick||s.params.closeByBackdropClick)&&e.on("click",v)}),s.on("popoverClose",function(){(s.params.closeByOutsideClick||s.params.closeByBackdropClick)&&e.off("click",v)}),i[0].f7Modal=s,s}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.resize=function(){var o=this.app,e=this.$el,t=this.$targetEl,a=this.$angleEl,r=this.params,p=r.targetX,n=r.targetY;e.css({left:"",top:""});var i,s,l,d=[e.width(),e.height()],c=d[0],h=d[1],m=0;"ios"===o.theme||"aurora"===o.theme?(a.removeClass("on-left on-right on-top on-bottom").css({left:"",top:""}),m=a.width()/2):e.removeClass("popover-on-left popover-on-right popover-on-top popover-on-bottom popover-on-middle").css({left:"",top:""});var v,f,u,g,k=t.parents(".view");if(k.length>0){var w=k.offset();l={left:w.left,top:w.top,width:k.width(),height:k.height()}}else l={left:o.left,top:o.top,width:o.width,height:o.height};if(t&&t.length>0){v=t.outerWidth(),f=t.outerHeight();var b=t.offset();u=b.left-l.left,g=b.top-l.top;var y=t.parents(".page");y.length>0&&(g-=y[0].scrollTop)}else void 0!==p&&"undefined"!==n&&(u=p,g=n,v=this.params.targetWidth||0,f=this.params.targetHeight||0);var E,C=[0,0,0],M=C[0],x=C[1],B=C[2],O="md"===o.theme?"bottom":"top";"md"===o.theme?(h<l.height-g-f?(O="bottom",x=g+f):h<g?(x=g-h,O="top"):(O="middle",x=f/2+g-h/2),x=Math.max(8,Math.min(x,l.height-h-8)),u<l.width/2?(E="right",M="middle"===O?u+v:u):(E="left",M="middle"===O?u-c:u+v-c),M=Math.max(8,Math.min(M,l.width-c-8)),e.addClass("popover-on-"+O+" popover-on-"+E)):(h+m<g?x=g-h-m:h+m<l.height-g-f?(O="bottom",x=g+f+m):(O="middle",B=x=f/2+g-h/2,B-=x=Math.max(5,Math.min(x,l.height-h-5))),"top"===O||"bottom"===O?(B=M=v/2+u-c/2,M=Math.max(5,Math.min(M,l.width-c-5)),"top"===O&&a.addClass("on-bottom"),"bottom"===O&&a.addClass("on-top"),i=c/2-m+(B-=M),i=Math.max(Math.min(i,c-2*m-13),13),a.css({left:i+"px"})):"middle"===O&&(M=u-c-m,a.addClass("on-right"),(M<5||M+c>l.width)&&(M<5&&(M=u+v+m),M+c>l.width&&(M=l.width-c-5),a.removeClass("on-right").addClass("on-left")),s=h/2-m+B,s=Math.max(Math.min(s,h-2*m-13),13),a.css({top:s+"px"})));e.css({top:x+"px",left:M+"px"})},e}(r),i={name:"popover",params:{popover:{backdrop:!0,backdropEl:void 0,closeByBackdropClick:!0,closeByOutsideClick:!0,closeOnEscape:!1}},static:{Popover:n},create:function(){var o=this;o.popover=a.extend(p({app:o,constructor:n,defaultSelector:".popover.modal-in"}),{open:function(e,a,r){var p=t(e),i=p[0].f7Modal;return i||(i=new n(o,{el:p,targetEl:a})),i.open(a,r)}})},clicks:{".popover-open":function(o,e){void 0===e&&(e={});this.popover.open(e.popover,o,e.animate)},".popover-close":function(o,e){void 0===e&&(e={});this.popover.close(e.popover,e.animate)}}};if(e){if(o.prototype.modules&&o.prototype.modules[i.name])return;o.use(i),o.instance&&(o.instance.useModuleParams(i,o.instance.params),o.instance.useModule(i))}return i}(Framework7, typeof Framework7AutoInstallComponent === 'undefined' ? undefined : Framework7AutoInstallComponent))
